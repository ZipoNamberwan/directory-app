# MySQL/MariaDB Configuration File
# Generated by MySQL/MariaDB Settings Calculator
# Generated on: 2026-01-01
# 
# Server Specifications:
# - Total Memory: 4 GB
# - Available Memory: 4 GB  
# - Operating System: linux
# - Storage Type: ssd
#
# IMPORTANT: Always test configurations in a development environment first!
# Monitor your server performance and adjust settings as needed.

[mysqld]
# Basic Settings
user                           = mysql
pid-file                       = /var/run/mysqld/mysqld.pid
socket                         = /var/run/mysqld/mysqld.sock
port                           = 3306
basedir                        = /usr
datadir                        = /var/lib/mysql
tmpdir                         = /tmp

# Memory Settings
innodb_buffer_pool_size        = 2147483648
innodb_buffer_pool_instances   = 2
key_buffer_size                = 429496729
# Note: query_cache is removed in MySQL 8.0+
# query_cache_size               = 128849018
# query_cache_type               = 1
tmp_table_size                 = 214748364
max_heap_table_size            = 214748364
sort_buffer_size               = 8388608
read_buffer_size               = 4194304
read_rnd_buffer_size           = 8388608
join_buffer_size               = 4194304
table_definition_cache         = 2048
table_open_cache               = 1200

# Connection Settings
max_connections                = 300
max_allowed_packet             = 16M
thread_cache_size              = 30
open_files_limit               = 5000

# InnoDB Settings
innodb_log_file_size           = 536870912
innodb_log_buffer_size         = 16777216
innodb_flush_log_at_trx_commit = 1
innodb_flush_method            = O_DIRECT
innodb_file_per_table          = 1
innodb_io_capacity             = 400
innodb_io_capacity_max         = 800
innodb_read_io_threads         = 4
innodb_write_io_threads        = 4
innodb_thread_concurrency      = 0
innodb_page_cleaners           = 2
innodb_purge_threads           = 1
innodb_strict_mode             = 1
innodb_stats_on_metadata       = 0
innodb_adaptive_flushing       = 1
innodb_flush_neighbors         = 0

# Performance Schema (monitoring)
performance_schema             = ON

# Logging
log_error                      = /var/log/mysql/error.log
slow_query_log                 = 1
slow_query_log_file            = /var/log/mysql/mysql-slow.log
long_query_time                = 2
log_slow_admin_statements      = ON
log_slow_slave_statements      = ON

# Replication
server-id                      = 1
log_bin                        = /var/log/mysql/mysql-bin.log
expire_logs_days               = 10
max_binlog_size                = 100M
binlog_format                  = ROW

# Security
symbolic-links                 = 0

[client]
socket                         = /var/run/mysqld/mysqld.sock

[mysqldump]
quick
quote-names
max_allowed_packet             = 16M